<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—¬ë“œë¦„ íƒì§€ ê²°ê³¼</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>ì—¬ë“œë¦„ íƒì§€ ê²°ê³¼</h1>

    {% if results.error %}
        <p>{{ results.error }}</p>
    {% else %}
        <p>ì´ íƒì§€ëœ ì—¬ë“œë¦„ ê°œìˆ˜: {{ results.total_acne_count }}ê°œ</p>
        <h2>ë¶€ìœ„ë³„ ì—¬ë“œë¦„ ê°œìˆ˜:</h2>
        <ul>
            {% for part, count in results.acne_count_by_part.items() %}
                <li>{{ part }}: {{ count }}ê°œ</li>
            {% endfor %}
        </ul>
        {% if results.max_acne_part %}
            <p>ê°€ì¥ ì—¬ë“œë¦„ì´ ë§ì€ ë¶€ìœ„: {{ results.max_acne_part }}</p>
        {% else %}
            <p>ì—¬ë“œë¦„ì´ íƒì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    {% endif %}

        <button id="save-button">ì €ì¥í•˜ê¸°</button>
        <p id="save-status"></p>

    <a href="/">ë‹¤ì‹œ ê²€ì‚¬í•˜ê¸°</a>

    <!-- âœ… JavaScript ì½”ë“œëŠ” ë°˜ë“œì‹œ `<body>` ë ë¶€ë¶„ì— ì¶”ê°€ -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
    $(document).on("click", "#save-button", function() {  // âœ… ë™ì ìœ¼ë¡œ ìƒì„±ëœ ìš”ì†Œì—ë„ ì´ë²¤íŠ¸ ë°”ì¸ë”©
    console.log("âœ… ì €ì¥ ë²„íŠ¼ì´ í´ë¦­ë¨!");

    var results = {
        total_acne_count: "{{ results.total_acne_count }}",
        max_acne_part: "{{ results.max_acne_part }}"
    };

    console.log("ğŸ“¤ ì „ì†¡í•  ë°ì´í„°:", results);

    $.ajax({
        type: "POST",
        url: "/save_result",
        contentType: "application/json",
        data: JSON.stringify(results),
        success: function(response) {
            console.log("âœ… ì„œë²„ ì‘ë‹µ:", response);
            $("#save-status").text("âœ… ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        },
        error: function(xhr, status, error) {
            console.log("âŒ AJAX ìš”ì²­ ì‹¤íŒ¨:", xhr.responseText);
            $("#save-status").text("âŒ ì €ì¥ ì‹¤íŒ¨: " + xhr.responseText);
        }
    });
});

</script>



</body>
</html>
